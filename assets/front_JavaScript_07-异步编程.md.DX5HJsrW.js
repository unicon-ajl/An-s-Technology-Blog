import{_ as i,c as a,o as l,ah as n}from"./chunks/framework.GQ0CnO8R.js";const o=JSON.parse('{"title":"å¼‚æ­¥ç¼–ç¨‹","description":"","frontmatter":{},"headers":[{"level":1,"title":"å¼‚æ­¥ç¼–ç¨‹","slug":"å¼‚æ­¥ç¼–ç¨‹","link":"#å¼‚æ­¥ç¼–ç¨‹","children":[{"level":2,"title":"ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ","slug":"ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥","link":"#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥","children":[]},{"level":2,"title":"äºŒã€å¼‚æ­¥æ¼”è¿›å²ï¼šä»å›è°ƒåˆ° async/await","slug":"äºŒã€å¼‚æ­¥æ¼”è¿›å²-ä»å›è°ƒåˆ°-async-await","link":"#äºŒã€å¼‚æ­¥æ¼”è¿›å²-ä»å›è°ƒåˆ°-async-await","children":[{"level":3,"title":"1. å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰â€” åˆæœŸæ–¹æ¡ˆï¼Œä½†æ˜“é™·â€œåœ°ç‹±â€","slug":"_1-å›è°ƒå‡½æ•°-callback-â€”-åˆæœŸæ–¹æ¡ˆ-ä½†æ˜“é™·-åœ°ç‹±","link":"#_1-å›è°ƒå‡½æ•°-callback-â€”-åˆæœŸæ–¹æ¡ˆ-ä½†æ˜“é™·-åœ°ç‹±","children":[]},{"level":3,"title":"2. Promiseï¼ˆES6ï¼‰â€” é“¾å¼è°ƒç”¨ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç† âœ…","slug":"_2-promise-es6-â€”-é“¾å¼è°ƒç”¨-ç»Ÿä¸€é”™è¯¯å¤„ç†-âœ…","link":"#_2-promise-es6-â€”-é“¾å¼è°ƒç”¨-ç»Ÿä¸€é”™è¯¯å¤„ç†-âœ…","children":[]},{"level":3,"title":"3. async/awaitï¼ˆES2017ï¼‰â€” åŒæ­¥å†™æ³•ï¼Œå¼‚æ­¥æ‰§è¡Œ âœ¨","slug":"_3-async-await-es2017-â€”-åŒæ­¥å†™æ³•-å¼‚æ­¥æ‰§è¡Œ-âœ¨","link":"#_3-async-await-es2017-â€”-åŒæ­¥å†™æ³•-å¼‚æ­¥æ‰§è¡Œ-âœ¨","children":[]}]},{"level":2,"title":"ä¸‰ã€æ·±å…¥äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰","slug":"ä¸‰ã€æ·±å…¥äº‹ä»¶å¾ªç¯-event-loop","link":"#ä¸‰ã€æ·±å…¥äº‹ä»¶å¾ªç¯-event-loop","children":[{"level":3,"title":"æ‰§è¡Œæ¨¡å‹ï¼š","slug":"æ‰§è¡Œæ¨¡å‹","link":"#æ‰§è¡Œæ¨¡å‹","children":[]},{"level":3,"title":"ä¸¤ç±»ä»»åŠ¡ï¼š","slug":"ä¸¤ç±»ä»»åŠ¡","link":"#ä¸¤ç±»ä»»åŠ¡","children":[]},{"level":3,"title":"ç¤ºä¾‹ï¼šæ‰§è¡Œé¡ºåº","slug":"ç¤ºä¾‹-æ‰§è¡Œé¡ºåº","link":"#ç¤ºä¾‹-æ‰§è¡Œé¡ºåº","children":[]}]},{"level":2,"title":"å››ã€å¹¶å‘æ§åˆ¶ï¼šå¹¶è¡Œ vs ä¸²è¡Œ","slug":"å››ã€å¹¶å‘æ§åˆ¶-å¹¶è¡Œ-vs-ä¸²è¡Œ","link":"#å››ã€å¹¶å‘æ§åˆ¶-å¹¶è¡Œ-vs-ä¸²è¡Œ","children":[{"level":3,"title":"1. å¹¶è¡Œæ‰§è¡Œï¼ˆæ¨èï¼Œæ›´å¿«ï¼‰","slug":"_1-å¹¶è¡Œæ‰§è¡Œ-æ¨è-æ›´å¿«","link":"#_1-å¹¶è¡Œæ‰§è¡Œ-æ¨è-æ›´å¿«","children":[]},{"level":3,"title":"2. ä¸²è¡Œæ‰§è¡Œï¼ˆä¾èµ–å‰ä¸€æ­¥ç»“æœï¼‰","slug":"_2-ä¸²è¡Œæ‰§è¡Œ-ä¾èµ–å‰ä¸€æ­¥ç»“æœ","link":"#_2-ä¸²è¡Œæ‰§è¡Œ-ä¾èµ–å‰ä¸€æ­¥ç»“æœ","children":[]}]},{"level":2,"title":"äº”ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ","slug":"äº”ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ","link":"#äº”ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ","children":[{"level":3,"title":"1. å¿˜è®° await æˆ– .catch()","slug":"_1-å¿˜è®°-await-æˆ–-catch","link":"#_1-å¿˜è®°-await-æˆ–-catch","children":[]},{"level":3,"title":"2. åœ¨å¾ªç¯ä¸­é”™è¯¯ä½¿ç”¨ await","slug":"_2-åœ¨å¾ªç¯ä¸­é”™è¯¯ä½¿ç”¨-await","link":"#_2-åœ¨å¾ªç¯ä¸­é”™è¯¯ä½¿ç”¨-await","children":[]},{"level":3,"title":"3. æ··æ·† async å‡½æ•°çš„è¿”å›å€¼","slug":"_3-æ··æ·†-async-å‡½æ•°çš„è¿”å›å€¼","link":"#_3-æ··æ·†-async-å‡½æ•°çš„è¿”å›å€¼","children":[]}]},{"level":2,"title":"å…­ã€ç°ä»£å¼‚æ­¥å·¥å…·è¡¥å……","slug":"å…­ã€ç°ä»£å¼‚æ­¥å·¥å…·è¡¥å……","link":"#å…­ã€ç°ä»£å¼‚æ­¥å·¥å…·è¡¥å……","children":[{"level":3,"title":"1. AbortController â€” å–æ¶ˆè¯·æ±‚","slug":"_1-abortcontroller-â€”-å–æ¶ˆè¯·æ±‚","link":"#_1-abortcontroller-â€”-å–æ¶ˆè¯·æ±‚","children":[]},{"level":3,"title":"2. Top-level awaitï¼ˆES2022ï¼Œæ¨¡å—ä¸­å¯ç”¨ï¼‰","slug":"_2-top-level-await-es2022-æ¨¡å—ä¸­å¯ç”¨","link":"#_2-top-level-await-es2022-æ¨¡å—ä¸­å¯ç”¨","children":[]}]},{"level":2,"title":"æœ€ä½³å®è·µ","slug":"æœ€ä½³å®è·µ","link":"#æœ€ä½³å®è·µ","children":[]}]}],"relativePath":"front/JavaScript/07-å¼‚æ­¥ç¼–ç¨‹.md","filePath":"front/JavaScript/07-å¼‚æ­¥ç¼–ç¨‹.md","lastUpdated":1766568604000}'),t={name:"front/JavaScript/07-å¼‚æ­¥ç¼–ç¨‹.md"};function h(e,s,k,p,r,d){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="å¼‚æ­¥ç¼–ç¨‹" tabindex="-1">å¼‚æ­¥ç¼–ç¨‹ <a class="header-anchor" href="#å¼‚æ­¥ç¼–ç¨‹" aria-label="Permalink to â€œå¼‚æ­¥ç¼–ç¨‹â€">â€‹</a></h1><blockquote><p>â³ <strong>JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œå´èƒ½å¤„ç†æ— æ•°å¹¶å‘ä»»åŠ¡â€”â€”é çš„å°±æ˜¯â€œå¼‚æ­¥â€ä¸â€œäº‹ä»¶å¾ªç¯â€</strong>ã€‚<br> ä»å›è°ƒåœ°ç‹±åˆ° <code>async/await</code>ï¼ŒæŒæ¡å¼‚æ­¥æ¨¡å‹ï¼Œæ˜¯æ„å»ºå“åº”å¼ Web åº”ç”¨çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p></blockquote><hr><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥" tabindex="-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ <a class="header-anchor" href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥" aria-label="Permalink to â€œä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿâ€">â€‹</a></h2><p>JavaScript è¿è¡Œåœ¨<strong>å•çº¿ç¨‹</strong>ä¸­ï¼Œè‹¥æ‰€æœ‰æ“ä½œéƒ½åŒæ­¥æ‰§è¡Œï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‡è®¾è¿™æ˜¯åŒæ­¥ç½‘ç»œè¯·æ±‚ï¼ˆå®é™…ä¼šé˜»å¡ï¼ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¡µé¢å¡æ­»ç›´åˆ°è¿”å›ï¼</span></span></code></pre></div><p>ç”¨æˆ·ç•Œé¢å°†å®Œå…¨å†»ç»“ï¼Œä½“éªŒæå·®ã€‚</p><p>âœ… <strong>å¼‚æ­¥æœºåˆ¶</strong>ï¼šå‘èµ·è€—æ—¶æ“ä½œï¼ˆå¦‚ç½‘ç»œã€æ–‡ä»¶ã€å®šæ—¶å™¨ï¼‰å<strong>ç«‹å³è¿”å›</strong>ï¼Œç»“æœé€šè¿‡<strong>å›è°ƒ</strong>æˆ–<strong>Promise</strong>åœ¨æœªæ¥æŸä¸ªæ—¶åˆ»å¤„ç†ã€‚</p><hr><h2 id="äºŒã€å¼‚æ­¥æ¼”è¿›å²-ä»å›è°ƒåˆ°-async-await" tabindex="-1">äºŒã€å¼‚æ­¥æ¼”è¿›å²ï¼šä»å›è°ƒåˆ° async/await <a class="header-anchor" href="#äºŒã€å¼‚æ­¥æ¼”è¿›å²-ä»å›è°ƒåˆ°-async-await" aria-label="Permalink to â€œäºŒã€å¼‚æ­¥æ¼”è¿›å²ï¼šä»å›è°ƒåˆ° async/awaitâ€">â€‹</a></h2><h3 id="_1-å›è°ƒå‡½æ•°-callback-â€”-åˆæœŸæ–¹æ¡ˆ-ä½†æ˜“é™·-åœ°ç‹±" tabindex="-1">1. å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰â€” åˆæœŸæ–¹æ¡ˆï¼Œä½†æ˜“é™·â€œåœ°ç‹±â€ <a class="header-anchor" href="#_1-å›è°ƒå‡½æ•°-callback-â€”-åˆæœŸæ–¹æ¡ˆ-ä½†æ˜“é™·-åœ°ç‹±" aria-label="Permalink to â€œ1. å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰â€” åˆæœŸæ–¹æ¡ˆï¼Œä½†æ˜“é™·â€œåœ°ç‹±â€â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.id, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getPosts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(profile.id, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">posts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(posts); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ğŸ¤¯ åµŒå¥—åœ°ç‹±</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><ul><li><strong>é—®é¢˜</strong>ï¼šåµŒå¥—æ·±ã€é”™è¯¯å¤„ç†éš¾ã€æ§åˆ¶æµæ··ä¹±ã€‚</li></ul><hr><h3 id="_2-promise-es6-â€”-é“¾å¼è°ƒç”¨-ç»Ÿä¸€é”™è¯¯å¤„ç†-âœ…" tabindex="-1">2. Promiseï¼ˆES6ï¼‰â€” é“¾å¼è°ƒç”¨ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç† âœ… <a class="header-anchor" href="#_2-promise-es6-â€”-é“¾å¼è°ƒç”¨-ç»Ÿä¸€é”™è¯¯å¤„ç†-âœ…" aria-label="Permalink to â€œ2. Promiseï¼ˆES6ï¼‰â€” é“¾å¼è°ƒç”¨ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç† âœ…â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.id))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getPosts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(profile.id))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">posts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(posts))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å‡ºé”™äº†:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err));</span></span></code></pre></div><h4 id="promise-çš„ä¸‰ç§çŠ¶æ€" tabindex="-1">Promise çš„ä¸‰ç§çŠ¶æ€ï¼š <a class="header-anchor" href="#promise-çš„ä¸‰ç§çŠ¶æ€" aria-label="Permalink to â€œPromise çš„ä¸‰ç§çŠ¶æ€ï¼šâ€">â€‹</a></h4><ul><li><strong>pending</strong>ï¼ˆè¿›è¡Œä¸­ï¼‰</li><li><strong>fulfilled</strong>ï¼ˆæˆåŠŸï¼Œè°ƒç”¨ <code>.then()</code>ï¼‰</li><li><strong>rejected</strong>ï¼ˆå¤±è´¥ï¼Œè°ƒç”¨ <code>.catch()</code>ï¼‰</li></ul><blockquote><p>âœ… <strong>é“¾å¼è°ƒç”¨</strong>ï¼šæ¯ä¸ª <code>.then()</code> è¿”å›æ–° Promiseï¼Œå¯ç»§ç»­é“¾å¼å¤„ç†ã€‚</p></blockquote><hr><h3 id="_3-async-await-es2017-â€”-åŒæ­¥å†™æ³•-å¼‚æ­¥æ‰§è¡Œ-âœ¨" tabindex="-1">3. async/awaitï¼ˆES2017ï¼‰â€” åŒæ­¥å†™æ³•ï¼Œå¼‚æ­¥æ‰§è¡Œ âœ¨ <a class="header-anchor" href="#_3-async-await-es2017-â€”-åŒæ­¥å†™æ³•-å¼‚æ­¥æ‰§è¡Œ-âœ¨" aria-label="Permalink to â€œ3. async/awaitï¼ˆES2017ï¼‰â€” åŒæ­¥å†™æ³•ï¼Œå¼‚æ­¥æ‰§è¡Œ âœ¨â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadUserPosts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> profile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> posts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getPosts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(profile.id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(posts);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å‡ºé”™äº†:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="æ ¸å¿ƒè§„åˆ™" tabindex="-1">æ ¸å¿ƒè§„åˆ™ï¼š <a class="header-anchor" href="#æ ¸å¿ƒè§„åˆ™" aria-label="Permalink to â€œæ ¸å¿ƒè§„åˆ™ï¼šâ€">â€‹</a></h4><ul><li><code>async</code> å‡½æ•°<strong>æ€»æ˜¯è¿”å› Promise</strong>ï¼›</li><li><code>await</code> åªèƒ½åœ¨ <code>async</code> å‡½æ•°å†…ä½¿ç”¨ï¼›</li><li>é”™è¯¯ç”¨ <code>try...catch</code> æ•è·ï¼ˆåƒåŒæ­¥ä»£ç ä¸€æ ·è‡ªç„¶ï¼‰ã€‚</li></ul><blockquote><p>âœ… <strong>ç°ä»£å¼‚æ­¥é¦–é€‰æ–¹æ¡ˆ</strong>ï¼šå¯è¯»æ€§é«˜ã€è°ƒè¯•å‹å¥½ã€æ”¯æŒå¹¶è¡Œä¼˜åŒ–ã€‚</p></blockquote><hr><h2 id="ä¸‰ã€æ·±å…¥äº‹ä»¶å¾ªç¯-event-loop" tabindex="-1">ä¸‰ã€æ·±å…¥äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ <a class="header-anchor" href="#ä¸‰ã€æ·±å…¥äº‹ä»¶å¾ªç¯-event-loop" aria-label="Permalink to â€œä¸‰ã€æ·±å…¥äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰â€">â€‹</a></h2><p>JavaScript å¦‚ä½•åœ¨å•çº¿ç¨‹ä¸­å¤„ç†å¼‚æ­¥ï¼Ÿé  <strong>äº‹ä»¶å¾ªç¯ + ä»»åŠ¡é˜Ÿåˆ—</strong>ã€‚</p><h3 id="æ‰§è¡Œæ¨¡å‹" tabindex="-1">æ‰§è¡Œæ¨¡å‹ï¼š <a class="header-anchor" href="#æ‰§è¡Œæ¨¡å‹" aria-label="Permalink to â€œæ‰§è¡Œæ¨¡å‹ï¼šâ€">â€‹</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚   Call Stack â”‚ â† åŒæ­¥ä»£ç é€è¡Œæ‰§è¡Œ</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>       â”‚</span></span>
<span class="line"><span>       â–¼</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚  Callback    â”‚â—„â”€â”€â”€â–ºâ”‚  Event Loop  â”‚</span></span>
<span class="line"><span>â”‚   Queue      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre></div><h3 id="ä¸¤ç±»ä»»åŠ¡" tabindex="-1">ä¸¤ç±»ä»»åŠ¡ï¼š <a class="header-anchor" href="#ä¸¤ç±»ä»»åŠ¡" aria-label="Permalink to â€œä¸¤ç±»ä»»åŠ¡ï¼šâ€">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>å®ä»»åŠ¡ï¼ˆMacrotaskï¼‰</strong></td><td><code>setTimeout</code>, <code>setInterval</code>, I/O, UI æ¸²æŸ“</td><td>æ¯æ¬¡äº‹ä»¶å¾ªç¯åªæ‰§è¡Œä¸€ä¸ª</td></tr><tr><td><strong>å¾®ä»»åŠ¡ï¼ˆMicrotaskï¼‰</strong></td><td><code>Promise.then</code>, <code>queueMicrotask</code>, <code>MutationObserver</code></td><td>ä¸€æ¬¡å®ä»»åŠ¡åï¼Œ<strong>æ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—</strong></td></tr></tbody></table><h3 id="ç¤ºä¾‹-æ‰§è¡Œé¡ºåº" tabindex="-1">ç¤ºä¾‹ï¼šæ‰§è¡Œé¡ºåº <a class="header-anchor" href="#ç¤ºä¾‹-æ‰§è¡Œé¡ºåº" aria-label="Permalink to â€œç¤ºä¾‹ï¼šæ‰§è¡Œé¡ºåºâ€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>è¾“å‡º</strong>ï¼š<code>1 â†’ 4 â†’ 3 â†’ 2</code></p><blockquote><p>ğŸ’¡ å¾®ä»»åŠ¡ä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡ï¼</p></blockquote><hr><h2 id="å››ã€å¹¶å‘æ§åˆ¶-å¹¶è¡Œ-vs-ä¸²è¡Œ" tabindex="-1">å››ã€å¹¶å‘æ§åˆ¶ï¼šå¹¶è¡Œ vs ä¸²è¡Œ <a class="header-anchor" href="#å››ã€å¹¶å‘æ§åˆ¶-å¹¶è¡Œ-vs-ä¸²è¡Œ" aria-label="Permalink to â€œå››ã€å¹¶å‘æ§åˆ¶ï¼šå¹¶è¡Œ vs ä¸²è¡Œâ€">â€‹</a></h2><h3 id="_1-å¹¶è¡Œæ‰§è¡Œ-æ¨è-æ›´å¿«" tabindex="-1">1. å¹¶è¡Œæ‰§è¡Œï¼ˆæ¨èï¼Œæ›´å¿«ï¼‰ <a class="header-anchor" href="#_1-å¹¶è¡Œæ‰§è¡Œ-æ¨è-æ›´å¿«" aria-label="Permalink to â€œ1. å¹¶è¡Œæ‰§è¡Œï¼ˆæ¨èï¼Œæ›´å¿«ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">settings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>Promise.all()</code>ï¼šæ‰€æœ‰ Promise åŒæ—¶å‘èµ·ï¼Œä»»ä¸€å¤±è´¥åˆ™æ•´ä½“å¤±è´¥ï¼›</li><li><code>Promise.allSettled()</code>ï¼šç­‰å¾…æ‰€æœ‰å®Œæˆï¼ˆæ— è®ºæˆè´¥ï¼‰ï¼›</li><li><code>Promise.race()</code>ï¼šè¿”å›ç¬¬ä¸€ä¸ªå®Œæˆçš„ Promiseã€‚</li></ul><hr><h3 id="_2-ä¸²è¡Œæ‰§è¡Œ-ä¾èµ–å‰ä¸€æ­¥ç»“æœ" tabindex="-1">2. ä¸²è¡Œæ‰§è¡Œï¼ˆä¾èµ–å‰ä¸€æ­¥ç»“æœï¼‰ <a class="header-anchor" href="#_2-ä¸²è¡Œæ‰§è¡Œ-ä¾èµ–å‰ä¸€æ­¥ç»“æœ" aria-label="Permalink to â€œ2. ä¸²è¡Œæ‰§è¡Œï¼ˆä¾èµ–å‰ä¸€æ­¥ç»“æœï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> posts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchPosts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.id); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¿…é¡»ç­‰ user</span></span></code></pre></div><blockquote><p>âœ… èƒ½å¹¶è¡Œå°±å¹¶è¡Œï¼Œå‡å°‘æ€»è€—æ—¶ã€‚</p></blockquote><hr><h2 id="äº”ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ" tabindex="-1">äº”ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ <a class="header-anchor" href="#äº”ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ" aria-label="Permalink to â€œäº”ã€å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µâ€">â€‹</a></h2><h3 id="_1-å¿˜è®°-await-æˆ–-catch" tabindex="-1">1. å¿˜è®° <code>await</code> æˆ– <code>.catch()</code> <a class="header-anchor" href="#_1-å¿˜è®°-await-æˆ–-catch" aria-label="Permalink to â€œ1. å¿˜è®° await æˆ– .catch()â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ å±é™©ï¼šæœªå¤„ç†çš„ rejected Promise</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">someAsyncFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… æ­£ç¡®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> someAsyncFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ async å‡½æ•°ä¸­</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">someAsyncFn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.error);</span></span></code></pre></div><blockquote><p>ğŸ”¥ æœªå¤„ç†çš„ Promise rejection ä¼šå¯¼è‡´é™é»˜å¤±è´¥ï¼</p></blockquote><hr><h3 id="_2-åœ¨å¾ªç¯ä¸­é”™è¯¯ä½¿ç”¨-await" tabindex="-1">2. åœ¨å¾ªç¯ä¸­é”™è¯¯ä½¿ç”¨ <code>await</code> <a class="header-anchor" href="#_2-åœ¨å¾ªç¯ä¸­é”™è¯¯ä½¿ç”¨-await" aria-label="Permalink to â€œ2. åœ¨å¾ªç¯ä¸­é”™è¯¯ä½¿ç”¨ awaitâ€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âŒ ä¸²è¡Œæ‰§è¡Œï¼ˆæ…¢ï¼ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ids) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/api/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸€ä¸ªæ¥ä¸€ä¸ª</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… å¹¶è¡Œæ‰§è¡Œï¼ˆå¿«ï¼ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> promises</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ids.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/api/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(promises);</span></span></code></pre></div><hr><h3 id="_3-æ··æ·†-async-å‡½æ•°çš„è¿”å›å€¼" tabindex="-1">3. æ··æ·† <code>async</code> å‡½æ•°çš„è¿”å›å€¼ <a class="header-anchor" href="#_3-æ··æ·†-async-å‡½æ•°çš„è¿”å›å€¼" aria-label="Permalink to â€œ3. æ··æ·† async å‡½æ•°çš„è¿”å›å€¼â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 42ï¼ˆä¸æ˜¯ Promiseï¼ï¼‰</span></span></code></pre></div><ul><li><code>async</code> å‡½æ•°è¿”å›çš„æ˜¯ <strong>resolved çš„ Promise</strong>ï¼Œå€¼è¢«è‡ªåŠ¨åŒ…è£…ã€‚</li></ul><hr><h2 id="å…­ã€ç°ä»£å¼‚æ­¥å·¥å…·è¡¥å……" tabindex="-1">å…­ã€ç°ä»£å¼‚æ­¥å·¥å…·è¡¥å…… <a class="header-anchor" href="#å…­ã€ç°ä»£å¼‚æ­¥å·¥å…·è¡¥å……" aria-label="Permalink to â€œå…­ã€ç°ä»£å¼‚æ­¥å·¥å…·è¡¥å……â€">â€‹</a></h2><h3 id="_1-abortcontroller-â€”-å–æ¶ˆè¯·æ±‚" tabindex="-1">1. <code>AbortController</code> â€” å–æ¶ˆè¯·æ±‚ <a class="header-anchor" href="#_1-abortcontroller-â€”-å–æ¶ˆè¯·æ±‚" aria-label="Permalink to â€œ1. AbortController â€” å–æ¶ˆè¯·æ±‚â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { signal: controller.signal });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å–æ¶ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="_2-top-level-await-es2022-æ¨¡å—ä¸­å¯ç”¨" tabindex="-1">2. Top-level <code>await</code>ï¼ˆES2022ï¼Œæ¨¡å—ä¸­å¯ç”¨ï¼‰ <a class="header-anchor" href="#_2-top-level-await-es2022-æ¨¡å—ä¸­å¯ç”¨" aria-label="Permalink to â€œ2. Top-level awaitï¼ˆES2022ï¼Œæ¨¡å—ä¸­å¯ç”¨ï¼‰â€">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ .mjs æˆ– &lt;script type=&quot;module&quot;&gt; ä¸­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><hr><h2 id="æœ€ä½³å®è·µ" tabindex="-1">æœ€ä½³å®è·µ <a class="header-anchor" href="#æœ€ä½³å®è·µ" aria-label="Permalink to â€œæœ€ä½³å®è·µâ€">â€‹</a></h2><p>âœ… <strong>ä¼˜å…ˆä½¿ç”¨ <code>async/await</code></strong>ï¼Œé€»è¾‘æ¸…æ™°ã€é”™è¯¯å¤„ç†ç›´è§‚ï¼›<br> âœ… <strong>ç”¨ <code>Promise.all</code> å®ç°å¹¶è¡Œè¯·æ±‚</strong>ï¼Œæå‡æ€§èƒ½ï¼›<br> âœ… <strong>å§‹ç»ˆå¤„ç† Promise rejection</strong>ï¼ˆ<code>try/catch</code> æˆ– <code>.catch()</code>ï¼‰ï¼›<br> âœ… <strong>ç†è§£äº‹ä»¶å¾ªç¯ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</strong>ï¼›<br> âœ… <strong>ç”¨ <code>AbortController</code> æ”¯æŒå–æ¶ˆæ“ä½œï¼Œæå‡ç”¨æˆ·ä½“éªŒ</strong>ã€‚</p><hr><p>âœ… æœ¬ç¯‡äº®ç‚¹ï¼š</p><ul><li>ç”¨â€œ1 â†’ 4 â†’ 3 â†’ 2â€ç¤ºä¾‹æ¸…æ™°æ­ç¤ºå¾®ä»»åŠ¡/å®ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼›</li><li>å¯¹æ¯”å›è°ƒã€Promiseã€async/await çš„æ¼”è¿›é€»è¾‘ï¼›</li><li>å¼ºè°ƒ <code>Promise.all</code> å¹¶è¡Œ vs å¾ªç¯ <code>await</code> ä¸²è¡Œçš„æ€§èƒ½å·®å¼‚ï¼›</li><li>æŒ‡å‡ºæœªå¤„ç† rejection çš„é™é»˜å¤±è´¥é£é™©ï¼›</li><li>å¼•å…¥ <code>AbortController</code> ç­‰ç°ä»£å–æ¶ˆæœºåˆ¶ã€‚</li></ul>`,69)])])}const E=i(t,[["render",h]]);export{o as __pageData,E as default};
