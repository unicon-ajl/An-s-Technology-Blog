
# 盒模型与布局基础

> 📦 **每个 HTML 元素都是一个“盒子”**。  
> 理解盒模型，是掌握 CSS 布局的第一块基石。

---

## 什么是盒模型？

在 CSS 中，**所有元素都被视为矩形盒子**，由四部分组成（从内到外）：

```
+---------------------------+
|         margin            |
|  +---------------------+  |
|  |       border        |  |
|  |  +---------------+  |  |
|  |  |   padding     |  |  |
|  |  |  +---------+  |  |  |
|  |  |  | content |  |  |  |
|  |  |  +---------+  |  |  |
|  |  |               |  |  |
|  |  +---------------+  |  |
|  |                     |  |
|  +---------------------+  |
|                           |
+---------------------------+
```

- **`content`**：实际内容（文本、图片等）；
- **`padding`**：内容与边框之间的内边距；
- **`border`**：边框；
- **`margin`**：盒子与其他元素之间的外边距。

> 💡 默认情况下，`width` 和 `height` **只设置 content 区域的尺寸**。

---

## 标准盒模型 vs 怪异盒模型

### 1. 标准盒模型（`box-sizing: content-box`）✅ 默认
```css
.box {
  width: 200px;
  padding: 20px;
  border: 5px solid black;
}
```
- 实际总宽度 = `200 + 20*2 + 5*2 = 250px`；
- 容易导致“明明设了 100%，却溢出”的问题。

---

### 2. 怪异盒模型（`box-sizing: border-box`）✅ **推荐**
```css
.box {
  box-sizing: border-box;
  width: 200px;
  padding: 20px;
  border: 5px solid black;
}
```
- `width` 包含 `padding` 和 `border`；
- 实际总宽度 = `200px`（所见即所得）；
- 更符合直觉，尤其在响应式布局中。

> ✅ **最佳实践：全局重置为 `border-box`**
> ```css
> *, *::before, *::after {
>   box-sizing: border-box;
> }
> ```

---

## 外边距（Margin）的特殊行为

### 1. 外边距合并（Margin Collapse）
**垂直方向**的相邻块级元素，其上下外边距会“合并”为较大值：
```html
<p style="margin-bottom: 20px;">段落1</p>
<p style="margin-top: 30px;">段落2</p>
```
- 实际间距 = `30px`（不是 50px）；
- **仅发生在普通文档流中的块级元素之间**；
- 浮动、绝对定位、Flex/Grid 子项**不会合并**。

> 💡 利用此特性可简化间距控制，但需注意意外合并。

---

### 2. `margin: auto` 的魔力
- 在**块级元素**上：`margin: 0 auto` 可实现水平居中（需指定宽度）；
- 在 **Flex/Grid 容器**中：`margin: auto` 可推挤元素到边缘（如右对齐）。

```css
.centered {
  width: 60%;
  margin: 0 auto; /* 水平居中 */
}
```

---

## 内边距（Padding）与边框（Border）

- `padding` 会撑大盒子（除非用 `border-box`）；
- `border` 有三个子属性：`width`、`style`、`color`；
- 常用简写：
  ```css
  padding: 10px;            /* 四边 */
  padding: 10px 20px;       /* 上下 / 左右 */
  padding: 10px 20px 5px;   /* 上 / 左右 / 下 */
  border: 1px solid #ccc;   /* 宽度 样式 颜色 */
  ```

> ⚠️ 注意：`padding` 不能为负值，`margin` 可以。

---

## 布局显示类型（Display）

元素的 `display` 属性决定其布局行为：

| 值 | 行为 | 常见元素 |
|----|------|--------|
| `block` | 独占一行，可设宽高 | `<div>`, `<p>`, `<h1>` |
| `inline` | 不换行，宽高无效 | `<span>`, `<a>`, `<strong>` |
| `inline-block` | 行内但可设宽高 | `<img>`, `<input>` |
| `none` | 完全隐藏（不占空间） | — |

### 示例：让链接像按钮
```css
.nav-link {
  display: inline-block;
  padding: 8px 16px;
  background: #007bff;
  color: white;
}
```

---

## 最佳实践

✅ **全局设置 `box-sizing: border-box`**；  
✅ **用 `padding` 控制内部呼吸感，用 `margin` 控制外部间距**；  
✅ **避免过度依赖 `margin` 负值**（易引发布局错乱）；  
✅ **理解 `display` 是布局的起点**——后续 Flex/Grid 都基于此。

---

✅ 本篇亮点：
- 用 ASCII 图直观展示盒模型四层结构；
- 明确推荐 `border-box` 并给出全局重置代码；
- 解释“外边距合并”这一经典困惑点；
- 强调 `display` 是布局体系的根基。