
# 选择器详解

> 🔍 **选择器是 CSS 的“眼睛”**——它决定样式作用于哪些元素。  
> 掌握选择器，就掌握了精准控制页面样式的钥匙。

---

## 基础选择器

### 1. 元素选择器（Type Selector）
选中所有指定标签：
```css
p { color: #333; }
div { margin: 1rem 0; }
```
- 简单直接，但特异性低；
- 适合全局重置或基础样式。

---

### 2. 类选择器（Class Selector）✅ **最常用**
以 `.` 开头，可重复用于多个元素：
```css
.btn { padding: 8px 16px; border-radius: 4px; }
.alert-warning { background: #fff3cd; }
```
```html
<button class="btn alert-warning">警告</button>
```
- **语义化命名**：`.primary-button` 比 `.red-btn` 更易维护；
- 可组合使用：`class="btn btn-large"`。

---

### 3. ID 选择器（ID Selector）⚠️ **慎用**
以 `#` 开头，**页面中应唯一**：
```css
#main-header { position: fixed; top: 0; }
```
- 特异性高（100），容易引发优先级冲突；
- 更适合 JavaScript 获取元素（如 `document.getElementById`）；
- **不推荐用于样式定义**。

---

## 属性选择器

根据元素的属性或属性值匹配：

| 语法 | 含义 | 示例 |
|------|------|------|
| `[attr]` | 存在该属性 | `a[target]` → 所有带 `target` 的链接 |
| `[attr="value"]` | 属性值完全匹配 | `input[type="email"]` |
| `[attr^="value"]` | 属性值以…开头 | `a[href^="https"]` → 安全链接 |
| `[attr$="value"]` | 属性值以…结尾 | `a[href$=".pdf"]` → PDF 链接 |
| `[attr*="value"]` | 属性值包含… | `img[src*="avatar"]` |

### 实战：为外部链接加图标
```css
a[href^="http"]:not([href*="yourdomain.com"])::after {
  content: " ↗";
  font-size: 0.8em;
}
```

---

## 伪类选择器（Pseudo-classes）

表示元素的**特殊状态**，以 `:` 开头：

| 伪类 | 用途 | 示例 |
|------|------|------|
| `:hover` | 鼠标悬停 | `.btn:hover { opacity: 0.9; }` |
| `:focus` | 元素获得焦点 | `input:focus { outline: 2px solid blue; }` |
| `:active` | 元素被激活（点击中） | `.btn:active { transform: scale(0.98); }` |
| `:first-child` / `:last-child` | 第一个/最后一个子元素 | `li:first-child { font-weight: bold; }` |
| `:nth-child(n)` | 第 n 个子元素 | `tr:nth-child(even) { background: #f9f9f9; }` |
| `:not(selector)` | 排除匹配元素 | `p:not(.intro) { font-size: 1rem; }` |

> 💡 提示：`:focus` 对键盘导航用户至关重要，**不要随意移除 `outline`**！

---

## 组合与关系选择器

通过符号连接多个选择器，表达结构关系：

| 符号 | 名称 | 含义 | 示例 |
|------|------|------|------|
| ` `（空格） | 后代选择器 | 匹配所有后代 | `.card p` → 卡片内所有段落 |
| `>` | 子选择器 | 仅匹配直接子元素 | `.menu > li` → 菜单的一级项 |
| `+` | 相邻兄弟 | 紧跟前一个元素 | `h2 + p` → 紧接 h2 的段落 |
| `~` | 通用兄弟 | 后续所有同级元素 | `input:checked ~ .hint` → 显示提示 |

### 示例：文章排版优化
```css
/* 标题后第一个段落首行缩进取消 */
h2 + p {
  text-indent: 0;
}

/* 列表项之间加间距，但不加在最后 */
li + li {
  margin-top: 0.5rem;
}
```

---

## 伪元素（Pseudo-elements）

创建**不在 DOM 中的虚拟元素**，以 `::` 开头：

| 伪元素 | 用途 | 示例 |
|--------|------|------|
| `::before` / `::after` | 在元素前后插入内容 | 清除浮动、装饰图标 |
| `::first-line` | 段落第一行 | `p::first-line { font-weight: bold; }` |
| `::first-letter` | 首字母 | 制作“首字下沉”效果 |

### 示例：清除浮动（现代已少用，但需了解）
```css
.clearfix::after {
  content: "";
  display: table;
  clear: both;
}
```

> ⚠️ 注意：`::before`/`::after` 必须设置 `content`（哪怕为空）才生效。

---

## 最佳实践

✅ **优先使用类选择器**，避免过度依赖元素或 ID；  
✅ **组合选择器不超过 3 层**（如 `.card .header .title` → 改为 `.card-title`）；  
✅ **用 `:not()` 替代冗余覆盖**；  
✅ **为交互状态（hover/focus）提供视觉反馈**，提升可用性。

---

✅ 本篇亮点：
- 将选择器分类为“基础→属性→伪类→组合→伪元素”，逻辑递进；
- 每类都配实用示例（如外部链接图标、列表间距）；
- 强调无障碍（`:focus` 不可删）与可维护性（避免深层嵌套）；
- 区分“伪类”（状态）与“伪元素”（内容），避免混淆。