
# CSS 引入方式与优先级

> 🧩 **CSS 有三种引入方式，但它们的“话语权”不同**。  
> 理解加载顺序与优先级规则，是解决“为什么样式没生效？”的第一步。

---

## 三种引入方式

### 1. 外部样式表（推荐 ✅）
通过 `<link>` 标签引入独立 `.css` 文件：
```html
<head>
  <link rel="stylesheet" href="styles.css">
</head>
```
- **优点**：可缓存、可复用、结构清晰；
- **适用场景**：所有正式项目。

---

### 2. 内部样式（`<style>` 标签）
在 HTML 的 `<head>` 中直接写 CSS：
```html
<head>
  <style>
    body { font-family: sans-serif; }
  </style>
</head>
```
- **优点**：无需额外请求，适合单页原型；
- **缺点**：无法复用，污染 HTML；
- **适用场景**：邮件模板、临时演示页。

---

### 3. 内联样式（`style` 属性）
直接写在 HTML 元素上：
```html
<p style="color: red; font-size: 18px;">注意！</p>
```
- **优点**：优先级最高，即时生效；
- **缺点**：无法复用、难以维护、违反关注点分离；
- **适用场景**：极少数动态样式（如 JS 计算的位置）。

> ⚠️ **不要滥用内联样式**！它会让 CSS 失去“集中管理”的优势。

---

## 优先级规则：谁说了算？

当多个规则作用于同一元素时，浏览器按以下顺序决定最终样式：

### 1. **来源顺序（后胜先）**
```css
p { color: blue; }
p { color: green; } /* 最终为绿色 */
```

### 2. **特异性（Specificity）**
选择器越具体，权重越高。计算规则（从高到低）：

| 选择器类型 | 示例 | 权重 |
|-----------|------|------|
| 行内样式 | `style="..."` | 1000 |
| ID 选择器 | `#header` | 100 |
| 类/属性/伪类 | `.btn`, `[type="text"]`, `:hover` | 10 |
| 元素/伪元素 | `div`, `p::before` | 1 |

> 💡 权重相加，**不进位**（如 11 个类 ≠ 1 个 ID）。

#### 示例
```css
/* 权重：10 + 1 = 11 */
.warning p { color: orange; }

/* 权重：100 */
#alert { color: red; }
```
```html
<p id="alert" class="warning">这段文字是红色（ID 权重更高）</p>
```

### 3. **`!important`（强制最高）**
```css
p { color: blue !important; }
```
- 覆盖所有其他规则（包括行内样式）；
- **强烈建议避免使用**——它会破坏层叠逻辑，导致调试噩梦。

> ✅ 替代方案：提升选择器特异性，或调整代码组织结构。

---

## 实战：优先级排查步骤

当你发现样式“没生效”，按此流程检查：

1. **打开开发者工具**（F12），选中元素；
2. 查看右侧 **Styles 面板**，被划掉的规则即被覆盖；
3. 检查：
   - 是否有更高特异性选择器？
   - 是否有后加载的同名规则？
   - 是否误用了 `!important`？
4. **优先通过重构选择器解决**，而非加 `!important`。

---

## 最佳实践

✅ **统一使用外部样式表**（`<link>`）  
✅ **避免 ID 选择器写样式**（改用 class，更灵活）  
✅ **类名语义化**：`.article-title` 而非 `.red-big-text`  
✅ **按模块组织 CSS 文件**：`header.css`, `button.css`, `layout.css`

> 📌 提示：现代构建工具（如 Vite）会自动合并多个 CSS 文件，无需担心请求数。

---

✅ 本篇亮点：
- 用表格清晰对比三种引入方式的优劣；
- 特异性讲解采用“权重数值+示例”双保险；
- 提供可操作的“优先级排查步骤”；
- 强调工程化思维（外部文件、语义化类名）。