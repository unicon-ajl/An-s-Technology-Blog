
# 过渡、动画与变换

> ✨ **微交互让界面“活”起来**。  
> CSS 提供了三种核心能力：  
> - **`transition`**：状态变化的平滑过渡；  
> - **`transform`**：不扰动文档流的视觉变形；  
> - **`@keyframes` + `animation`**：复杂关键帧动画。

它们共同构成现代 Web 动效的基础。

---

## 一、过渡（Transition）—— 状态间的桥梁

当元素属性值发生变化时（如 hover、focus），`transition` 让变化**平滑进行**而非突变。

### 基础语法
```css
.element {
  transition: property duration timing-function delay;
}
```

### 示例：按钮悬停效果
```css
.btn {
  background: #007bff;
  transition: background 0.3s ease; /* 背景色 0.3 秒平滑变化 */
}

.btn:hover {
  background: #0056b3;
}
```

### 常用属性值
| 属性 | 说明 | 推荐值 |
|------|------|--------|
| `property` | 要过渡的 CSS 属性 | `all`（慎用）、`opacity`、`transform`、`background-color` |
| `duration` | 持续时间 | `0.2s`–`0.5s`（太快无感，太慢烦躁） |
| `timing-function` | 速度曲线 | `ease`（默认）、`ease-in-out`、`cubic-bezier(...)` |
| `delay` | 延迟开始 | 通常为 `0` |

> 💡 **性能提示**：优先过渡 `opacity` 和 `transform`，它们由 GPU 加速，不会触发重排（reflow）。

---

## 二、变换（Transform）—— 视觉变形不扰布局

`transform` 可对元素进行**位移、缩放、旋转、倾斜**，且**不影响其他元素位置**（不触发重排）。

### 常用函数
```css
.transform-demo {
  transform: 
    translateX(100px)   /* 水平移动 */
    translateY(-20px)   /* 垂直移动 */
    scale(1.1)          /* 放大 10% */
    rotate(5deg)        /* 顺时针旋转 5 度 */
    skewX(10deg);       /* X 轴倾斜 */
}
```

### 实战：卡片悬停上浮
```css
.card {
  transition: transform 0.3s ease;
}

.card:hover {
  transform: translateY(-8px); /* 向上轻微移动 */
}
```

> ✅ 优势：`transform` 不改变元素在文档流中的位置，安全高效。

---

## 三、关键帧动画（Animation）—— 完整故事线

当需要**多步骤、循环、非交互驱动**的动画时，使用 `@keyframes`。

### 基础语法
```css
@keyframes slideIn {
  from { transform: translateX(-100%); opacity: 0; }
  to   { transform: translateX(0);     opacity: 1; }
}

.element {
  animation: slideIn 0.6s ease-out;
}
```

### 复杂关键帧（百分比控制）
```css
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-20px); }
}
```

### `animation` 简写属性
```css
animation: name duration timing-function delay iteration-count direction fill-mode;
```

常用值：
- `iteration-count`: `1`（默认）、`infinite`（无限循环）；
- `direction`: `normal`, `reverse`, `alternate`（往返）；
- `fill-mode`: `forwards`（停在最后一帧）。

### 示例：加载指示器
```css
.spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
```

---

## 性能与可访问性

### ⚡ 性能优化
- **只动画 `transform` 和 `opacity`** → 触发合成（compositing），不重排/重绘；
- 避免动画 `width`、`height`、`top/left`（会触发 layout）；
- 使用 `will-change: transform` 提示浏览器（谨慎使用）。

### ♿ 无障碍关怀
- **尊重用户偏好**：
  ```css
  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
      transition: none !important;
    }
  }
  ```
- **避免高频闪烁**（>3Hz）→ 可能引发光敏性癫痫；
- **动效应服务于功能**（如反馈、引导），而非炫技。

---

## 常见误区

❌ “用 JavaScript 做所有动画”  
✅ CSS 动画更轻量、流畅，且不依赖 JS 加载。

❌ “`transition: all` 很方便”  
✅ 明确指定属性（如 `transition: opacity 0.2s`），避免意外触发。

❌ “动画越炫越好”  
✅ 微交互原则：**快、 subtle（微妙）、有意义**。

---

✅ 本篇亮点：
- 清晰区分 `transition` / `transform` / `animation` 的适用场景；
- 强调 **GPU 加速属性（transform/opacity）** 的性能优势；
- 提供 `prefers-reduced-motion` 的完整无障碍方案；
- 用“卡片上浮”“加载旋转”等真实案例降低理解门槛。