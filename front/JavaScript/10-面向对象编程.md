
# é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰

> ğŸ§± **é¢å‘å¯¹è±¡ä¸æ˜¯â€œæœ‰ class å°±æ˜¯ OOPâ€ï¼Œè€Œæ˜¯å…³äºå°è£…ã€å¤ç”¨ä¸æŠ½è±¡çš„æ€ç»´æ–¹å¼**ã€‚  
> JavaScript è™½åŸºäºåŸå‹ï¼Œä½†å®Œå…¨æ”¯æŒç°ä»£ OOP çš„å››å¤§æ”¯æŸ±ï¼š**å°è£…ã€æŠ½è±¡ã€ç»§æ‰¿ã€å¤šæ€**ã€‚

---

## ä¸€ã€OOP å››å¤§æ”¯æŸ±åœ¨ JS ä¸­çš„ä½“ç°

| æ”¯æŸ± | å«ä¹‰ | JavaScript å®ç°æ–¹å¼ |
|------|------|-------------------|
| **å°è£…ï¼ˆEncapsulationï¼‰** | éšè—å†…éƒ¨ç»†èŠ‚ï¼Œæš´éœ²å¯æ§æ¥å£ | ç§æœ‰å­—æ®µï¼ˆ`#`ï¼‰ã€é—­åŒ…ã€æ¨¡å— |
| **æŠ½è±¡ï¼ˆAbstractionï¼‰** | å¿½ç•¥å¤æ‚ç»†èŠ‚ï¼Œèšç„¦é«˜å±‚è¡Œä¸º | æ¥å£è®¾è®¡ã€é«˜é˜¶å‡½æ•°ã€ç±»æ–¹æ³• |
| **ç»§æ‰¿ï¼ˆInheritanceï¼‰** | å­ç±»å¤ç”¨çˆ¶ç±»å±æ€§ä¸æ–¹æ³• | åŸå‹é“¾ã€`extends` |
| **å¤šæ€ï¼ˆPolymorphismï¼‰** | åŒä¸€æ¥å£ï¼Œä¸åŒå®ç° | æ–¹æ³•é‡å†™ã€é¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰ |

> ğŸ’¡ JavaScript çš„ OOP æ˜¯**åŸºäºåŸå‹çš„**ï¼Œè€Œéä¼ ç»Ÿâ€œç±»-å®ä¾‹â€æ¨¡å‹ï¼Œä½† `class` è¯­æ³•è®©å…¶æ›´è´´è¿‘ä¸»æµè®¤çŸ¥ã€‚

---

## äºŒã€å°è£…ï¼šéšè—å†…éƒ¨çŠ¶æ€

### 1. ç§æœ‰å­—æ®µï¼ˆES2022+ï¼‰âœ… **ç°ä»£æ ‡å‡†**
```js
class BankAccount {
  #balance = 0; // ç§æœ‰å­—æ®µï¼Œå¤–éƒ¨æ— æ³•è®¿é—®

  deposit(amount) {
    if (amount > 0) this.#balance += amount;
  }

  getBalance() {
    return this.#balance; // é€šè¿‡å…¬æœ‰æ–¹æ³•æš´éœ²
  }
}

const account = new BankAccount();
account.deposit(100);
console.log(account.getBalance()); // 100
// console.log(account.#balance); // âŒ SyntaxError
```

> âœ… **ç§æœ‰å­—æ®µä»¥ `#` å¼€å¤´**ï¼ŒçœŸæ­£å®ç°å°è£…ã€‚

---

### 2. é—­åŒ…æ¨¡æ‹Ÿç§æœ‰ï¼ˆæ—§æ–¹æ¡ˆï¼‰
```js
function createCounter() {
  let count = 0; // å¤–éƒ¨ä¸å¯è®¿é—®
  return {
    increment: () => ++count,
    getCount: () => count
  };
}
```
- é€‚ç”¨äºå‡½æ•°å¼é£æ ¼ï¼›
- ä½†æ¯ä¸ªå®ä¾‹éƒ½åˆ›å»ºæ–°å‡½æ•°ï¼Œå†…å­˜å¼€é”€å¤§ã€‚

---

## ä¸‰ã€ç»§æ‰¿ï¼šä»£ç å¤ç”¨çš„æ ¸å¿ƒ

### ä½¿ç”¨ `class` å’Œ `extends`
```js
class Animal {
  constructor(name) {
    this.name = name;
  }

  speak() {
    console.log(`${this.name} makes a sound.`);
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    super(name); // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
    this.breed = breed;
  }

  // é‡å†™çˆ¶ç±»æ–¹æ³•ï¼ˆå¤šæ€ï¼‰
  speak() {
    console.log(`${this.name} barks!`);
  }

  fetch() {
    console.log("Fetching the ball!");
  }
}
```

### ç»§æ‰¿é“¾éªŒè¯
```js
const dog = new Dog("Rex", "Husky");
dog.speak(); // "Rex barks!"ï¼ˆå¤šæ€ï¼‰

console.log(dog instanceof Dog);     // true
console.log(dog instanceof Animal);  // true
console.log(dog instanceof Object);  // true
```

> âœ… **ä¼˜å…ˆç»„åˆï¼Œæ…ç”¨ç»§æ‰¿**ï¼šè‹¥åªæ˜¯å¤ç”¨æ–¹æ³•ï¼Œè€ƒè™‘æ··å…¥ï¼ˆMixinï¼‰æˆ–å·¥å…·å‡½æ•°ã€‚

---

## å››ã€å¤šæ€ï¼šåŒä¸€æ¥å£ï¼Œå¤šç§è¡Œä¸º

å¤šæ€åœ¨ JS ä¸­å¤©ç„¶å­˜åœ¨â€”â€”**ä¸ä¾èµ–ç±»å‹å£°æ˜ï¼Œåªçœ‹å¯¹è±¡æ˜¯å¦æœ‰å¯¹åº”æ–¹æ³•**ï¼ˆé¸­å­ç±»å‹ï¼‰ã€‚

```js
class Cat {
  speak() {
    console.log("Meow!");
  }
}

class Robot {
  speak() {
    console.log("Beep boop!");
  }
}

function makeSpeak(thing) {
  thing.speak(); // åªè¦ thing æœ‰ speak æ–¹æ³•å³å¯
}

makeSpeak(new Dog("Rex"));   // "Rex barks!"
makeSpeak(new Cat());        // "Meow!"
makeSpeak(new Robot());      // "Beep boop!"
```

> ğŸ’¡ JavaScript çš„å¤šæ€æ¯”é™æ€è¯­è¨€æ›´çµæ´»â€”â€”**æ— éœ€ç»§æ‰¿åŒä¸€åŸºç±»**ã€‚

---

## äº”ã€æŠ½è±¡ä¸æ¥å£ï¼ˆJS ä¸­çš„æ¨¡æ‹Ÿï¼‰

JavaScript æ²¡æœ‰åŸç”Ÿ `interface`ï¼Œä½†å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼çº¦å®šâ€œå¥‘çº¦â€ï¼š

### 1. æŠ½è±¡åŸºç±»ï¼ˆæŠ›å‡ºé”™è¯¯å¼ºåˆ¶å­ç±»å®ç°ï¼‰
```js
class Shape {
  area() {
    throw new Error("å­ç±»å¿…é¡»å®ç° area æ–¹æ³•");
  }
}

class Circle extends Shape {
  constructor(radius) {
    super();
    this.radius = radius;
  }

  area() {
    return Math.PI * this.radius ** 2;
  }
}
```

### 2. æ–‡æ¡£ + TypeScriptï¼ˆæ¨èå¤§å‹é¡¹ç›®ï¼‰
```ts
// TypeScript æ¥å£
interface Drawable {
  draw(): void;
}

class Button implements Drawable {
  draw() { /* ... */ }
}
```

> âœ… çº¯ JS é¡¹ç›®å¯ç”¨ JSDoc æ³¨é‡Šçº¦å®šæ¥å£ï¼š
> ```js
> /**
>  * @interface
>  * @property {function(): void} draw - ç»˜åˆ¶æ–¹æ³•
>  */
> ```

---

## å…­ã€é™æ€æ–¹æ³•ä¸å±æ€§

å±äº**ç±»æœ¬èº«**ï¼Œè€Œéå®ä¾‹ï¼š

```js
class MathUtils {
  static PI = 3.14159;

  static randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }
}

console.log(MathUtils.PI); // 3.14159
console.log(MathUtils.randomInt(1, 10)); // å¦‚ 7
```

âœ… ç”¨é€”ï¼šå·¥å…·æ–¹æ³•ã€å·¥å‚å‡½æ•°ã€å¸¸é‡é…ç½®ã€‚

---

## ä¸ƒã€getter / setterï¼šæ§åˆ¶å±æ€§è®¿é—®

```js
class Temperature {
  constructor(celsius) {
    this._celsius = celsius;
  }

  get celsius() {
    return this._celsius;
  }

  set celsius(value) {
    if (value < -273.15) {
      throw new Error("æ¸©åº¦ä¸èƒ½ä½äºç»å¯¹é›¶åº¦");
    }
    this._celsius = value;
  }

  get fahrenheit() {
    return this._celsius * 9/5 + 32;
  }
}

const temp = new Temperature(0);
console.log(temp.fahrenheit); // 32
temp.celsius = -300; // âŒ æŠ›å‡ºé”™è¯¯
```

> âœ… ç”¨äºæ•°æ®æ ¡éªŒã€è®¡ç®—å±æ€§ã€å…¼å®¹æ—§ APIã€‚

---

## å…«ã€OOP è®¾è®¡åŸåˆ™ï¼ˆSOLID ç®€åŒ–ç‰ˆï¼‰

- **å•ä¸€èŒè´£**ï¼šä¸€ä¸ªç±»åªåšä¸€ä»¶äº‹ï¼›
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼›
- **é‡Œæ°æ›¿æ¢**ï¼šå­ç±»åº”èƒ½æ›¿æ¢çˆ¶ç±»è€Œä¸ç ´åé€»è¾‘ï¼›
- **æ¥å£éš”ç¦»**ï¼šå®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼›
- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡ï¼Œè€Œéå…·ä½“å®ç°ã€‚

> ğŸ’¡ åœ¨ JS ä¸­ï¼Œ**ç»„åˆ > ç»§æ‰¿** å¾€å¾€æ›´çµæ´»ã€æ›´æ˜“æµ‹è¯•ã€‚

---

## æœ€ä½³å®è·µ

âœ… **ç”¨ `class` + ç§æœ‰å­—æ®µï¼ˆ`#`ï¼‰å®ç°å°è£…**ï¼›  
âœ… **ä¼˜å…ˆç»„åˆå¤ç”¨ï¼Œé¿å…æ·±å±‚ç»§æ‰¿æ ‘**ï¼›  
âœ… **åˆ©ç”¨å¤šæ€å’Œé¸­å­ç±»å‹ç¼–å†™é€šç”¨å‡½æ•°**ï¼›  
âœ… **ç”¨ `static` å®šä¹‰å·¥å…·æ–¹æ³•ï¼Œé¿å…æ±¡æŸ“å…¨å±€**ï¼›  
âœ… **ç”¨ getter/setter æ§åˆ¶å±æ€§è®¿é—®é€»è¾‘**ï¼›  
âœ… **å¤§å‹é¡¹ç›®è€ƒè™‘ TypeScript å¼ºåŒ–æ¥å£å¥‘çº¦**ã€‚

---

âœ… æœ¬ç¯‡äº®ç‚¹ï¼š
- æ˜ç¡® OOP å››å¤§æ”¯æŸ±åœ¨ JS ä¸­çš„å…·ä½“å®ç°ï¼›
- å±•ç¤ºç§æœ‰å­—æ®µï¼ˆ`#`ï¼‰è¿™ä¸€ç°ä»£å°è£…æ ‡å‡†ï¼›
- å¼ºè°ƒâ€œé¸­å­ç±»å‹â€ä½¿ JS å¤šæ€æ›´çµæ´»ï¼›
- æä¾›æŠ½è±¡åŸºç±»å’Œ JSDoc æ¨¡æ‹Ÿæ¥å£çš„å®ç”¨æ–¹æ¡ˆï¼›
- èå…¥ SOLID åŸåˆ™ï¼Œå¼•å¯¼è‰¯å¥½è®¾è®¡ã€‚